import { eventBus } from "../services/eventBus-service.js";

export default {
    props: ['email'],
    template: `


<section class="preview-details">

<div class="preview-details-symbols">
    <!-- back symbol -->
    <div class="back" title="back to list">
        <svg class="back" @click="backToList" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 477.175 477.175" style="enable-background:new 0 0 477.175 477.175;" xml:space="preserve">
        <g>
	<path d="M145.188,238.575l215.5-215.5c5.3-5.3,5.3-13.8,0-19.1s-13.8-5.3-19.1,0l-225.1,225.1c-5.3,5.3-5.3,13.8,0,19.1l225.1,225   c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4c5.3-5.3,5.3-13.8,0-19.1L145.188,238.575z"/>
    </g>
    </svg>
    </div>

    <!-- archive symbol -->
        <svg class="archive" xmlns="http://www.w3.org/2000/svg" width="752pt" height="752pt" version="1.1" viewBox="0 0 752 752">
    <path d="m375.85 181.54c-3.793 0.039063-7.4141 1.5938-10.055 4.3164-2.6406 2.7227-4.082 6.3906-4.0039 10.184v137.93l-42.473-39.516c-2.793-2.6289-6.5273-4.0156-10.359-3.8477-5.7461 0.26953-10.758 3.9766-12.703 9.3867-1.9453 5.4141-0.4375 11.465 3.8242 15.328l66.301 61.566c5.4375 5 13.801 5 19.238 0l66.301-61.566c2.9883-2.4922 4.8242-6.1016 5.0781-9.9844 0.25391-3.8828-1.0977-7.6992-3.7344-10.559s-6.332-4.5117-10.223-4.5742c-3.8867-0.0625-7.6328 1.4727-10.359 4.25l-42.477 39.516v-137.93c0.082031-3.8438-1.3984-7.5547-4.1055-10.289-2.707-2.7344-6.4023-4.2539-10.25-4.2109zm-86.129 146.96c-1.2695 0.12891-2.5156 0.42578-3.7031 0.88672l-66.301 23.68c-2.2109 0.78516-4.1953 2.1094-5.7695 3.8477l-47.359 52.094c-3.2539 3.5625-4.4766 8.5312-3.2539 13.195 1.2266 4.6641 4.7383 8.3906 9.3203 9.8906l37.594 12.582v63.934c0.03125 6.1641 4.0352 11.602 9.9141 13.465l151.55 47.359c2.793 0.88672 5.7891 0.88672 8.582 0l151.55-47.359c5.875-1.8633 9.8828-7.3008 9.9141-13.465v-23.68c0.054688-3.8047-1.418-7.4688-4.0898-10.176-2.668-2.7109-6.3125-4.2344-10.117-4.2344s-7.4492 1.5234-10.117 4.2344c-2.6719 2.707-4.1445 6.3711-4.0898 10.176v13.172l-123.13 38.477v-78.289l17.465 21.312c3.6914 4.5586 9.8047 6.3828 15.391 4.5859l156.28-52.094c4.5859-1.5 8.0938-5.2266 9.3203-9.8906 1.2266-4.6641 0.003907-9.6328-3.25-13.195l-47.359-52.094c-1.5781-1.7383-3.5586-3.0625-5.7734-3.8477l-66.301-23.68c-3.5703-1.3438-7.5352-1.1914-10.996 0.41797-3.4609 1.6133-6.125 4.5469-7.3984 8.1445-1.2734 3.6016-1.043 7.5586 0.63672 10.988 1.6758 3.4258 4.6641 6.0352 8.2891 7.2383l26.195 9.3203-106.71 33.449-106.7-33.449 26.195-9.3203c6.9453-2.207 11.098-9.3125 9.6094-16.445-1.4883-7.1328-8.1328-11.984-15.379-11.23zm-60.828 54.312 125.95 39.219-26.195 32.113-126.39-42.027zm294.21 0 26.637 29.305-126.39 42.027-26.195-32.113zm-284.45 71.332 90.273 30.043c5.5859 1.7969 11.703-0.027344 15.395-4.5859l17.461-21.312v78.289l-123.13-38.477z"/>
    </svg>

    <div class="Trash" @click="taggleMode('Trash',email.id)"></div>

        <svg class="copy" @click="copyText" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" viewBox="0 0 512 512" style="enable-background:new 0 0 512 512;" xml:space="preserve">
        <g>
	    <g>
		<path d="M509.116,189.867l-145.067-128c-1.741-1.536-3.883-2.227-6.101-2.116H307.2V8.533c0-4.719-3.823-8.533-8.533-8.533H8.533    C3.823,0,0,3.814,0,8.533V435.2c0,4.719,3.823,8.533,8.533,8.533L128,443.742v59.725c0,4.719,3.823,8.533,8.533,8.533h366.933    c4.71,0,8.533-3.814,8.533-8.533v-307.2C512,193.818,510.95,191.488,509.116,189.867z M366.933,87.177l113.963,100.557H366.933    V87.177z M128,68.267v358.409l-110.933-0.009v-409.6h273.067v42.692l-152.841,0.009C132.446,59.255,128,63.292,128,68.267z     M494.933,494.933H145.067v-59.264c0.009-0.154,0.009-0.299,0.009-0.461V76.834l204.792-0.017v119.45    c0,2.27,0.896,4.437,2.5,6.033c1.604,1.596,3.772,2.5,6.033,2.5h136.533V494.933z"/>
	    </g>

    </svg>

        <svg class="inbox" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Capa_1" x="0px" y="0px" viewBox="0 0 58 58" style="enable-background:new 0 0 58 58;" xml:space="preserve">
        <g>
        <path d="M21.707,24.293c-0.391-0.391-1.023-0.391-1.414,0s-0.391,1.023,0,1.414l7.999,7.999c0.001,0.001,0.001,0.001,0.002,0.002   L29,34.414l0.706-0.706c0.001-0.001,0.001-0.001,0.002-0.002l7.999-7.999c0.391-0.391,0.391-1.023,0-1.414s-1.023-0.391-1.414,0   L30,30.586V3c0-0.552-0.447-1-1-1s-1,0.448-1,1v27.586L21.707,24.293z"/>
        <path d="M57.981,32.676L57.53,32h-0.009l-3.583-5.381l-2.421-3.628l0.004-0.002L47.535,17H36v2h10.465l8.679,13H39v7H19v-7H2.856   l8.679-13H22v-2H10.465L0.431,32.031l-0.014,0.001L0,32.655v0.206v0.396v19.359C0,54.482,1.519,56,3.385,56h51.23   C56.481,56,58,54.482,58,52.616V33.239v-0.429l-0.014-0.036L57.981,32.676z"/>
        </g>

        </svg>
        </div>



    <main>
        
        <div class="subject-details">{{getSubject}}</div>
        <div class="header-details">

            <span class="from">{{email.from}}</span>
            <div class="time-and-star">
            <span class="time">{{getFormattedTime}}</span>
            <div :class="{'star-active' : email.isStared , 'star-preview' : !email.isStared }" 
             @click="taggleMode('Starred',email.id)"></div>
            </div>
        </div>
        <div class="user-logo-container">
        <svg class="user-logo" xmlns="http://www.w3.org/2000/svg" id="Layer_1" data-name="Layer 1" viewBox="0 0 512 512"><defs><style>.cls-1{fill:#141f38;}</style></defs><title>man-5-outline</title><path class="cls-1" d="M320,310.18V277.27A128,128,0,0,0,384,166.4V128a128,128,0,0,0-256,0v38.4a128,128,0,0,0,64,110.87v32.91A172.84,172.84,0,0,0,51.2,480a32,32,0,0,0,32,32H428.8a32,32,0,0,0,32-32A172.84,172.84,0,0,0,320,310.18ZM192,340.71l35.38,17.69L192,376.09Zm128,0v35.38L284.62,358.4ZM258.59,25.63l.87,0,1.71.06,1,.06,1.53.1,1.09.09,1.46.13,1.11.12,1.42.16,1.12.15,1.39.2,1.12.18,1.37.23,1.12.21,1.35.26,1.11.23,1.34.29,1.09.26,1.34.33,1.08.28,1.32.36,1.07.31,1.31.39,1.06.33,1.3.42,1,.35,1.3.46,1,.37,1.3.5,1,.39,1.3.53,1,.41,1.3.57.94.42,1.29.61.91.44,1.3.65.88.44,1.32.69.84.45,1.33.75.79.45,1.37.81.72.43,1.42.89.64.4,1.5,1,.53.35,1.65,1.15.33.23q4,2.84,7.7,6.05l.11.1q.86.75,1.7,1.51l.31.29q.74.67,1.46,1.36l.41.4,1.32,1.29.47.48L330,57.27l.5.53L331.63,59l.52.58,1.09,1.23.53.61,1,1.23.53.65,1,1.23.53.68,1,1.25.52.69.92,1.26.51.72.88,1.27.5.74.85,1.29.48.75.82,1.31.47.77.79,1.33.45.78.76,1.35.43.79.72,1.37.41.8c.24.46.47.93.69,1.4l.39.8c.23.47.45,1,.67,1.43l.36.79c.22.48.43,1,.64,1.46l.34.79c.21.5.41,1,.62,1.5l.31.77c.2.52.4,1,.6,1.56l.28.74c.2.54.39,1.09.58,1.64l.24.69c.2.59.39,1.17.57,1.76l.19.59c.21.67.41,1.35.6,2l.11.36q1,3.61,1.79,7.32c0,.2.08.39.11.59.12.62.25,1.25.36,1.87,0,.27.09.55.14.83.09.55.19,1.1.27,1.65,0,.32.09.64.14,1,.07.51.15,1,.22,1.53,0,.35.08.7.13,1.06s.12,1,.17,1.46.07.75.11,1.12.09.94.13,1.41.06.78.08,1.17,0,.69.07,1a91.21,91.21,0,0,1-15.78,1.3c-56.31,0-123.22-42.11-123.87-42.52l-14.08-9L190.6,81.1l-34.11,22.74.09-.37c.3-1.23.63-2.46,1-3.68l.12-.4q.51-1.76,1.09-3.49l.15-.46c.4-1.18.82-2.35,1.26-3.51l.27-.7q.66-1.72,1.38-3.41l.25-.58q.73-1.68,1.51-3.32l.1-.21c.54-1.13,1.11-2.24,1.69-3.34l.34-.65q.85-1.59,1.76-3.15l.38-.65c.63-1.06,1.27-2.11,1.93-3.14l.19-.29q1-1.48,2-2.92l.37-.53q1-1.47,2.12-2.89l.49-.64q1.1-1.42,2.24-2.81l.39-.47q1.1-1.31,2.25-2.59l.31-.35q1.22-1.34,2.48-2.64l.56-.57q1.25-1.27,2.54-2.49l.54-.5c.89-.83,1.8-1.65,2.72-2.45l.16-.14q1.37-1.18,2.78-2.31l.56-.45q1.4-1.11,2.83-2.17l.64-.47c1-.71,2-1.41,3-2.09l.41-.27q1.44-1,2.92-1.87l.48-.3q1.55-.95,3.13-1.84l.69-.39q1.58-.88,3.2-1.7l.58-.29q1.61-.81,3.25-1.56l.25-.12c1.14-.52,2.29-1,3.45-1.48l.68-.28q1.7-.68,3.42-1.3l.69-.24c1.19-.42,2.39-.82,3.6-1.2l.26-.08q1.76-.54,3.55-1l.59-.16q1.81-.47,3.64-.88l.74-.16c1.23-.27,2.47-.51,3.72-.73l.52-.09q1.83-.31,3.69-.56l.39-.06c1.28-.17,2.57-.3,3.87-.42l.74-.07q1.92-.16,3.85-.25l.68,0c1.35-.05,2.71-.09,4.07-.09Q257.3,25.6,258.59,25.63ZM153.6,166.4V136.53l51.2-34.13s72.91,46.54,137.64,46.54a120.46,120.46,0,0,0,16-1V166.4a102.4,102.4,0,1,1-204.8,0ZM256,294.4a127.94,127.94,0,0,0,38.4-5.86v29.77l-38.4,23-38.4-23V288.54A127.94,127.94,0,0,0,256,294.4Zm172.8,192H83.2a6.41,6.41,0,0,1-6.4-6.4,147.41,147.41,0,0,1,89.6-135.45V396.8a12.8,12.8,0,0,0,18.52,11.45L256,372.72l71.08,35.54A12.8,12.8,0,0,0,345.6,396.8V344.55A147.41,147.41,0,0,1,435.2,480,6.41,6.41,0,0,1,428.8,486.4Z"/></svg>
        </div>

        <div class="to">
            <span class="name">{{getToUser}} </span>
            <span class="email"> <{{email.to}}></span>
        </div>

        <div class="content">
            {{email.body}}
        </div>

        <footer></footer>
        </main>
         </section>
`,
    data() {
        return {
            isStar: false
        };
    },
    computed: {

        getSubject() {
            return this.email.subject || '(no subject)'
        },
        getToUser() {
            const to = this.email.to
            return to.substring(0, to.indexOf('@'))
        },
        getFormattedTime() {
            var time = new Date(this.email.sentAt);
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            const year = time.getFullYear();
            const month = months[time.getMonth()];
            const date = time.getDate();
            const hour = time.getHours();
            const min = time.getMinutes();

            time = date + ', ' + month + ', ' + year + ', ' + hour + ':' + min
            return time;
        },

    },
    components: {
    },
    methods: {
        backToList() {
            eventBus.emit('backToList')
        },
        taggleMode(mode, id) {
            this.email.isStared = !this.email.isStared
            eventBus.emit('toggleMode', { mode, id });
            if (mode === 'Trash') eventBus.emit('backToList');

        },
        copyText(){
            navigator.clipboard.writeText(
                'to: '+ this.email.to+
                ' from: '+ this.email.from+
                ' subject: '+ this.email.subject+
                ' body: '+ this.email.body)
        }
    },
    created() {
    },
    unmounted() {
    },
};